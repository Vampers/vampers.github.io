<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="/img/logo_miccall.png"/>
	 <link rel="shortcut icon" href="/img/logo_miccall.png">
	
			
    <title>
    Shivy's Backyard
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/mic_main.css" />
    <link rel="stylesheet" href="/css/dropdownMenu.css" />
	
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css" />
    </noscript>

			    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_coy.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">Vous revoir</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">Home</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <!-- archives  归档   --> 
	        
	        <li class="active">
	            <a href="#s1">Archive</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="archive-link" href="/archives/2017/12/">December 2017</a>
	                    </ul>
	        </li>
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/about/" title="About">
		                About
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
		            
		                <li><a href="https://github.com/Vampers" class="icon fa-github"><span class="label">GitHub</span></a></li>
		            
		            
		            
		            
			</ul>
</nav>

        <div id="main" >
            <div class ="post_page_title_img" style="height: 25rem;background-image: url(https://res.cloudinary.com/ripple3710/image/upload/v1513669031/871561_uxgcxj.jpg);background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;" >
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2 >在Github和VPS上部署Hexo</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <h2 id="1-前言"><a href="#1-前言" class="headerlink" title="1. 前言"></a>1. 前言</h2><p>Hexo 是一个快速、简洁且高效的博客框架，支持丰富的插件和主题。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。本文主要介绍 Hexo 在 Github 和 VPS 上的搭建过程，操作系统环境为 Windows 10。  </p>
<h2 id="2-Github-上的搭建过程"><a href="#2-Github-上的搭建过程" class="headerlink" title="2. Github 上的搭建过程"></a>2. Github 上的搭建过程</h2><h3 id="2-1-创建仓库"><a href="#2-1-创建仓库" class="headerlink" title="2.1 创建仓库"></a>2.1 创建仓库</h3><p>在你的 Github 账号下新建一个名为 <code>你的用户名.github.io</code> 的仓库。例如，你的 Github 用户名为 xxx，则创建 <code>xxx.github.io</code>，将来你的网站访问地址就是 <code>https://xxx.github.io</code>。可见一个 Github 账号最多只能有一个这样的仓库。  </p>
<h3 id="2-2-环境搭建"><a href="#2-2-环境搭建" class="headerlink" title="2.2 环境搭建"></a>2.2 环境搭建</h3><p>在本地安装以下工具：  </p>
<ul>
<li><a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener">Node.js</a></li>
<li><a href="http://gitforwindows.org/" target="_blank" rel="noopener">Git for Windows</a>  </li>
</ul>
<p>注意事项：安装 Git for Windows 时要选择添加到系统环境变量中，方便以后的操作。安装完成后，打开 Git Bash，以下所有命令将在 Git Bash 中执行。</p>
<h3 id="2-3-配置-SSH-key"><a href="#2-3-配置-SSH-key" class="headerlink" title="2.3 配置 SSH key"></a>2.3 配置 SSH key</h3><p>提交代码需要拥有你的 Github 权限才可以，但是直接使用用户名和密码不够安全，所以我们使用 SSH key 来解决本地和服务器的连接问题。<br>用 Git Bash 执行如下命令：  </p>
<pre class=" language-bash"><code class="language-bash">$ <span class="token function">cd</span> ~/.ssh  //检查本机已存在的 SSH 密钥
</code></pre>
<p>如果提示：No such file or directory 说明你是第一次使用 git 。</p>
<pre class=" language-bash"><code class="language-bash">$ ssh-keygen -t rsa -C <span class="token string">"你的 Github 邮件地址"</span>
</code></pre>
<p>然后连续三次回车，最终会在用户目录下生成一个文件夹，打开 <code>C:\Users\你的用户名</code>，找到 <code>.ssh\id_rsa.pub</code> 文件，使用记事本打开并复制里面的内容，然后打开你的 Github 主页，进入个人设置 -&gt; SSH and GPG keys -&gt; New SSH key -&gt; 将刚复制的内容粘贴到 key 那里，title 随意填，保存。  </p>
<h3 id="2-4-测试"><a href="#2-4-测试" class="headerlink" title="2.4 测试"></a>2.4 测试</h3><pre class=" language-bash"><code class="language-bash">$ <span class="token function">ssh</span> -T git@github.com  //注意邮箱地址不用改
</code></pre>
<p>如果提示 <code>Are you sure you want to continue connecting (yes/no)?</code>，输入 <code>yes</code>，然后会看到：  </p>
<blockquote>
<p>Hi XXX! You’ve successfully authenticated, but GitHub does not provide shell access.  </p>
</blockquote>
<p>看到这个信息说明 SSH 已配置成功。<br>接下来，执行配置：</p>
<pre class=" language-bash"><code class="language-bash">$ <span class="token function">git</span> config --global user.name <span class="token string">"xxx"</span>  //你的 Github 用户名
$ <span class="token function">git</span> config --global user.email <span class="token string">"xxx@mail.com"</span>  //填写你的 Github 邮箱地址
</code></pre>
<h3 id="2-5-Hexo-的安装与配置"><a href="#2-5-Hexo-的安装与配置" class="headerlink" title="2.5 Hexo 的安装与配置"></a>2.5 Hexo 的安装与配置</h3><p><strong>此部分建议参考官方说明文档，有详细的指导和解释。</strong>  </p>
<ul>
<li><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">Documentaion | Hexo</a>  </li>
</ul>
<h4 id="2-5-1-安装及初始化"><a href="#2-5-1-安装及初始化" class="headerlink" title="2.5.1 安装及初始化"></a>2.5.1 安装及初始化</h4><p>安装:</p>
<pre class=" language-bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> -g hexo-cli
</code></pre>
<p>安装完成后，在电脑某个地方新建一个名为 <code>hexo</code> 的文件夹（名称可自定义），如 <code>D:\hexo</code>，将来这个文件夹会作为存放代码的地方。完成后执行：  </p>
<pre class=" language-bash"><code class="language-bash">$ <span class="token function">cd</span> /d/hexo
$ hexo init
</code></pre>
<p>Hexo 会自动下载一些文件到这个文件夹中，目录如下：  </p>
<pre class=" language-text"><code class="language-text">.
├── _config.yml
├── package.json
├── scaffolds
├── source
|   ├── _drafts
|   └── _posts
└── themes
</code></pre>
<h4 id="2-5-2-配置"><a href="#2-5-2-配置" class="headerlink" title="2.5.2 配置"></a>2.5.2 配置</h4><p>请看这篇说明文档：  </p>
<ul>
<li><a href="https://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="noopener">Configuration | Hexo</a>  </li>
</ul>
<h4 id="2-5-3-修改主题"><a href="#2-5-3-修改主题" class="headerlink" title="2.5.3 修改主题"></a>2.5.3 修改主题</h4><p>访问 Hexo 网站上提供的主题：  </p>
<ul>
<li><a href="https://hexo.io/themes/" target="_blank" rel="noopener">Themes | Hexo</a>  </li>
</ul>
<p>然后根据各个主题的说明操作。  </p>
<blockquote>
<p>注意 Hexo 根目录下的 <code>_config.yml</code> 和 <code>themes</code> 目录下的 <code>_config.yml</code> 这两者的区别。  </p>
</blockquote>
<h4 id="2-5-4-写作"><a href="#2-5-4-写作" class="headerlink" title="2.5.4 写作"></a>2.5.4 写作</h4><p>参考：  </p>
<ul>
<li><a href="https://hexo.io/zh-cn/docs/writing.html" target="_blank" rel="noopener">Writing | Hexo</a>  </li>
</ul>
<h4 id="2-5-5-上传到-Github"><a href="#2-5-5-上传到-Github" class="headerlink" title="2.5.5 上传到 Github"></a>2.5.5 上传到 Github</h4><p>首先，SSH key 肯定要配置好。<br>其次，配置 <code>_config.yml</code> 中有关 deploy 的部分:  </p>
<pre class=" language-text"><code class="language-text">deploy:
 type: git
 repository: git@github.com:xxx/xxx.github.io.git  //注意冒号和 xxx 之间没有空格
 branch: master
</code></pre>
<p>执行：  </p>
<pre class=" language-bash"><code class="language-bash">$ hexo clean  //非必须。清除缓存文件 <span class="token punctuation">(</span>db.json<span class="token punctuation">)</span> 和已生成的静态文件 <span class="token punctuation">(</span>public<span class="token punctuation">)</span>。在某些情况（尤其是更换主题后），如果发现对站点的更改无论如何也不生效，需要运行该命令。
$ hexo g  //生成静态文件
</code></pre>
<p>此时如果直接部署可能会报错，原因是缺少插件：  </p>
<pre class=" language-bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> hexo-deployer-git --save
</code></pre>
<p>安装完成后，执行：</p>
<pre class=" language-bash"><code class="language-bash">$ hexo d
</code></pre>
<p>完成部署。<br>此时，如果打开你的网页 <code>https://xxx.github.io</code> 应该能看到你发表的内容。<br><em>附：常用 Hexo 指令</em></p>
<ul>
<li><em><a href="https://hexo.io/zh-cn/docs/commands.html" target="_blank" rel="noopener">Commands | Hexo</a></em>  </li>
</ul>
<p><em>关于 Markdown 编辑器，个人推荐 VS Code 或者 Atom，用起来赏心悦目，本文即是由 VS Code 撰写的。</em>  </p>
<h2 id="3-VPS-上的搭建过程"><a href="#3-VPS-上的搭建过程" class="headerlink" title="3. VPS 上的搭建过程"></a>3. VPS 上的搭建过程</h2><p><strong>在进行这一部分之前，建议先完成本文前述的所有步骤，并确保正确无误。</strong></p>
<h3 id="3-1-域名解析"><a href="#3-1-域名解析" class="headerlink" title="3.1 域名解析"></a>3.1 域名解析</h3><ul>
<li>如果你还没有域名，那么你将需要购买一个，可以前往 <a href="https://sg.godaddy.com/zh/" target="_blank" rel="noopener">GoDaddy</a> 或其他域名销售网站购买。</li>
<li>然后前往 <a href="https://www.dnspod.cn/" target="_blank" rel="noopener">DNSPod</a>，选择 <code>域名解析</code>，填入你的域名，可以看到应该有 4 条记录类型，两条 <code>NS</code> 类型，一条 <code>A</code> 类型，一条 <code>CNAME</code> 类型。其中两条 <code>NS</code> 的记录类型是 DNSPod 默认配置的，无法修改，你需要在 <code>A</code> 记录类型中将记录值改为你的 VPS 的 IP 地址。</li>
<li>前往你的域名购买网站，将域名的 DNS 解析服务器设置为 <code>f1g1ns1.dnspod.net</code>，<code>f1g1ns2.dnspod.net</code>。注意填写为两栏，一栏填写一个。</li>
<li>点击保存，等待全球递归DNS服务器刷新（最多72小时）。</li>
<li>在等待生效过程中，你正好可以开始配置你的 VPS 。  </li>
</ul>
<h3 id="3-2-VPS-配置"><a href="#3-2-VPS-配置" class="headerlink" title="3.2 VPS 配置"></a>3.2 VPS 配置</h3><p>首先，在本地端安装 SSH 工具，这类工具有很多，使用方法也大同小异。本文将以 <a href="http://www.netsarang.com/xshell_download.html" target="_blank" rel="noopener">Xshell</a> 为例进行操作。  </p>
<h4 id="3-2-1-建立本地端和-VPS-服务器端的-SSH-连接"><a href="#3-2-1-建立本地端和-VPS-服务器端的-SSH-连接" class="headerlink" title="3.2.1 建立本地端和 VPS 服务器端的 SSH 连接"></a>3.2.1 建立本地端和 VPS 服务器端的 SSH 连接</h4><ul>
<li>在网页上登录你的 VPS 控制台，记录下 IP 地址，SSH 连接端口号，以及 root 用户的密码。</li>
<li>打开 Xshell，选择 <code>新建连接</code>，在 <code>Host</code> 一栏中填写 VPS 的 IP 地址，在 <code>Port Number</code> 一栏中填写 VPS 的 SSH 连接端口号，填好保存，建立连接。</li>
<li>连接过程中 Xshell 会弹框要求输入用户名和密码，用户名输入 <code>root</code>，密码输入你刚才记录的密码。</li>
<li><p>连接成功建立后，会在 Xshell 上显示:</p>
<blockquote>
<p>Connection established.<br>[root@localhost ~]#  </p>
</blockquote>
</li>
<li><p>test2</p>
</li>
</ul>

            </div>

            <!-- Post Comments -->
            

        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a href="https://github.com/Vampers" style="border-bottom: none;">Shivy</a></li>
            </ul>
            
			    <span> 2017 </span> 
        </div>
    </div>
</body>



 	
</html>
